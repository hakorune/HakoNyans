# Phase 9w Log (2026-02-14)

## Scope
- Continue single-core-first optimization after Step2 (`lossless_mode_select.h` LUT) promotion.
- Gate:
  - `total HKN bytes <= 2,977,544`
  - `median PNG/HKN >= 0.2610`
  - `ctest` 17/17 PASS
  - fixed6, `HAKONYANS_THREADS=1`, `taskset -c 0`, `runs=3`, `warmup=1`

## Baseline
- `bench_results/phase9w_singlecore_blockclass_step2_scalar_final_vs_afterfix_20260214_runs3.csv`
- key median:
  - `Enc(ms) 176.646`
  - `plane_route_comp(ms) 59.212`
  - `plane_lo_stream(ms) 58.312`

## Trial A: lo_stream mode3 branch-reduction rewrite (no-go)
- CSV:
  - `bench_results/phase9w_singlecore_lostream_mode3_branchcut_vs_step2_20260214_runs3.csv`
- result:
  - `Enc(ms) 176.646 -> 183.268` (regression)
  - size/ratio invariants unchanged
- archive:
  - `docs/archive/2026-02-14_lostream_mode3_branchcut_nogo.md`

## Trial B: byte_stream_encoder alloc/copy reduction (no-go)
- CSV:
  - `bench_results/phase9w_singlecore_bstream_allocopt_vs_step2_20260214_runs3.csv`
  - `bench_results/phase9w_singlecore_bstream_allocopt_vs_step2_20260214_runs3_rerun.csv`
- result:
  - wall encode not stable; no clear win across reruns
  - size/ratio invariants unchanged
- archive:
  - `docs/archive/2026-02-14_bstream_allocopt_nogo.md`

## Trial C: route_natural cost-loop fast-abs (no-go)
- CSV:
  - `bench_results/phase9w_singlecore_routecost_fastabs_vs_step2_20260214_runs3.csv`
- result:
  - `Enc(ms) 176.646 -> 187.400` (regression)
  - size/ratio invariants unchanged
- archive:
  - `docs/archive/2026-02-14_routecost_fastabs_nogo.md`

## Decision
- Keep promoted baseline at Step2 only.
- Reverted all three trial code patches.
- Preserved no-go history in `docs/archive/`.

