# HakoNyans Phase 7+ ä½œæˆ¦æ›¸ï¼šé€Ÿåº¦Ã—ç”»è³ªã®ä¸¡ç«‹ ğŸ±âš¡

**ä½œæˆæ—¥**: 2026-02-10  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: Claude + ChatGPT Proï¼ˆ2ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰  
**ç¾çŠ¶**: Phase 6 å®Œäº†ã€JPEG-XL/AVIF ã‚ˆã‚Šé€Ÿã„ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ JPEG ã® 6å€

---

## ğŸ“Š ç¾çŠ¶ã®å•é¡Œ

| æŒ‡æ¨™ | HakoNyans (Q=75) | JPEG (Q=90) | å·® |
|------|-------------------|-------------|-----|
| ãƒ‡ã‚³ãƒ¼ãƒ‰é€Ÿåº¦ | 27.4 ms | 8.3 ms | 3.3x é…ã„ |
| ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º | 1004 KB | 168 KB | **6.0x å¤§ãã„** â† ä¸»å•é¡Œ |
| PSNR | 41.3 dB | 34.6 dB | 6.7 dB è‰¯ã„ |

**åˆ†æ**: ç”»è³ªã¯é«˜ã„ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã‚‹ã€‚åŒã˜ PSNR ãªã‚‰ HakoNyans ã®æ–¹ãŒãšã£ã¨å¤§ãã„ã€‚  
**åŸå› **: 4:2:0 ãªã—ã€äºˆæ¸¬ãªã—ã€é©å¿œé‡å­åŒ–ãªã—ã€CDF ãŒç”»åƒå…¨ä½“ã§1ã¤

---

## ğŸ¯ ç›®æ¨™

| Phase | ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º | ãƒ‡ã‚³ãƒ¼ãƒ‰é€Ÿåº¦ | è¿½åŠ æ©Ÿèƒ½ |
|-------|-------------|------------|---------|
| **Phase 7** | JPEG ã® 2ã€œ3x ä»¥å†… | 20ms ä»¥ä¸‹ @ Full HD | åœ§ç¸®æ”¹å–„ + é€Ÿåº¦æ”¹å–„ |
| **Phase 8** | JPEG ã¨åŒç­‰ or ã‚„ã‚„å°ã•ã„ | JPEG ã¨åŒç­‰ or ã‚„ã‚„é€Ÿã„ | ãƒ­ã‚¹ãƒ¬ã‚¹ + ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« |

---

## ğŸ“‹ å…¨æ–½ç­–ä¸€è¦§ï¼ˆ10æ¡ˆ Aã€œJï¼‰

### è©•ä¾¡å‡¡ä¾‹
- â­â­â­â­â­ = æœ€é‡è¦ãƒ»æœ€å„ªå…ˆ
- ãƒ‡ã‚³ãƒ¼ãƒ€å½±éŸ¿: ãªã— > è¶…è»½ > è»½ã„ > è¿½åŠ ã‚ã‚Š > é‡ã„

| æ¡ˆ | æ–½ç­– | Phase | ãƒ‡ã‚³ãƒ¼ãƒ€å½±éŸ¿ | åœ§ç¸®åŠ¹æœ | é€Ÿåº¦åŠ¹æœ | å„ªå…ˆåº¦ |
|----|------|-------|------------|---------|---------|--------|
| **D** | é©å¿œé‡å­åŒ–ï¼ˆActivity Maskingï¼‰ | 7a â‘  | **ãªã—** | -10ã€œ15% | â€” | â­â­â­â­â­ |
| **E** | 4:2:0 ã‚µãƒ–ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° | 7a â‘¡ | è»½ã„ | **-33%** | â€” | â­â­â­â­â­ |
| **A** | CfLï¼ˆChroma from Lumaï¼‰ | 7a â‘¢ | è¶…è»½ã„ | -5ã€œ10%â€» | â€” | â­â­â­â­ |
| **F** | Band-group CDF | 7a â‘£ | ã»ã¼ãªã— | -5ã€œ10% | â€” | â­â­â­â­ |
| **G** | AAN IDCT é«˜é€ŸåŒ– | 7b â‘  | å·®æ›¿ã®ã¿ | â€” | **+20-30%** | â­â­â­â­â­ |
| **H** | Palette / Delta Palette | 7c â‘  | è»½ã„ | å¤§ï¼ˆã‚¹ã‚¯ã‚·ãƒ§ï¼‰ | â€” | â­â­â­â­ |
| **I** | 2Dã‚³ãƒ”ãƒ¼ï¼ˆPatch/IntraBCè»½é‡ç‰ˆï¼‰ | 7c â‘¡ | è»½ã„ | ä¸­ï¼ˆUI/ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ | â€” | â­â­â­ |
| **J** | P-Index ROI / éƒ¨åˆ†ãƒ‡ã‚³ãƒ¼ãƒ‰ | 7d | ãªã— | â€” | ä½“é¨“å‘ä¸Š | â­â­â­â­ |
| **B** | Super-res + è»½é‡ Restore | 8 | è¿½åŠ ã‚ã‚Š | å¤§ï¼ˆä½BRï¼‰ | -10% | â­â­â­ |
| **C** | Film Grain Synthesis | 8 | è»½ã„ | ä¸­ï¼ˆå†™çœŸï¼‰ | â€” | â­â­ |

**â€» CfL ã®åŠ¹æœã«ã¤ã„ã¦**: ChatGPT Pro ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã€Œ-15ã€œ25%ã¯ã‚„ã‚„å¼·æ°—ã€‚AV1ã®CfLè«–æ–‡ã§ã¯
BD-rateç´„5%æ”¹å–„ï¼ˆCIEDE2000ï¼‰ã€ã¨æŒ‡æ‘˜ã‚ã‚Šã€‚ç¾çŠ¶ã®ã‚¯ãƒ­ãƒç¬¦å·åŒ–ãŒã©ã‚Œã ã‘ç´ æœ´ã‹ã§å®Ÿæ¸¬ãŒå¤‰ã‚ã‚‹ãŸã‚ã€
ã¾ãšå®Ÿè£…ã—ã¦è¨ˆæ¸¬ãŒæ­£ç¾©ã€‚

---

## ğŸ”¬ å„æ¡ˆã®è©³ç´°åˆ†æ

### Aæ¡ˆ: CfLï¼ˆChroma from Lumaï¼‰

**æ¦‚è¦**: ã‚¯ãƒ­ãƒã‚’ãƒ«ãƒã®ç·šå½¢é–¢æ•°ã§äºˆæ¸¬ã€æ®‹å·®ã ã‘é€ã‚‹
```
Cb_pred[x,y] = alpha_cb * Y[x,y] + beta_cb
Cb_residual = Cb_actual - Cb_pred
â†’ Cb_residual ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆæƒ…å ±é‡ãŒæ¸›ã‚‹ï¼‰
```

**ChatGPT Pro è©•ä¾¡**:
- âœ… è‰²ã‚’å‰Šã‚‰ãšã«ã‚¯ãƒ­ãƒã‚’ç¸®ã‚ã‚‹æ–¹å‘ã§ã€4:4:4 ã§ã‚‚åŠ¹ã
- âœ… æ§‹é€ ãŒè»½ã„
- âš ï¸ AV1 ã® CfL è«–æ–‡ã§ã¯é™æ­¢ç”»ã§ BD-rate ç´„5%æ”¹å–„ï¼ˆæœŸå¾…å€¤ã¯æ§ãˆã‚ã«ï¼‰
- âš ï¸ å®Ÿæ¸¬ãŒæ­£ç¾©ï¼ˆHakoNyans ã®ã‚¯ãƒ­ãƒç¬¦å·åŒ–ã®ç´ æœ´ã•æ¬¡ç¬¬ï¼‰

**å‡ºå…¸**: [Predicting Chroma from Luma in AV1](https://arxiv.org/abs/1711.03951)

**å®Ÿè£…æ–¹é‡**:
- ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€: ãƒ–ãƒ­ãƒƒã‚¯ã”ã¨ã« alpha, beta ã‚’æœ€å°äºŒä¹—æ³•ã§è¨ˆç®—
- ãƒ‡ã‚³ãƒ¼ãƒ€: alpha, beta ã‚’èª­ã¿å–ã‚Šã€Y ã‹ã‚‰ Cb/Cr ã‚’äºˆæ¸¬ã€æ®‹å·®ã‚’åŠ ç®—
- alpha, beta ã¯ãƒ–ãƒ­ãƒƒã‚¯ã¾ãŸã¯ã‚¿ã‚¤ãƒ«å˜ä½ã§ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°

---

### Dæ¡ˆ: é©å¿œé‡å­åŒ–ï¼ˆActivity Maskingï¼‰

**æ¦‚è¦**: ãƒ†ã‚¯ã‚¹ãƒãƒ£ãŒè¤‡é›‘ãªå ´æ‰€ã¯è’ãã€å¹³å¦ãªå ´æ‰€ã¯ä¸å¯§ã«é‡å­åŒ–
```
activity = Î£|AC_coefficients|  (ãƒ–ãƒ­ãƒƒã‚¯ã®"å¿™ã—ã•")
q_scale = base_q * (activity / avg_activity)^mask_strength
```

**ChatGPT Pro è©•ä¾¡**:
- âœ… ãƒ‡ã‚³ãƒ¼ãƒ€ã®æ¼”ç®—è‡ªä½“ã¯ã»ã¼å¢—ãˆãªã„
- âœ… JPEG XL ã§ã‚‚ã‚³ã‚¢ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æ•´ç†ã•ã‚Œã¦ã„ã‚‹
- âš ï¸ q_step ãƒãƒƒãƒ—ã®ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ãŒå¢—ãˆã‚‹ï¼ˆå®Œå…¨ã«ç„¡æ–™ã§ã¯ãªã„ï¼‰
- âœ… NyANS-P ãªã‚‰ãã®ãƒ¡ã‚¿ã‚‚ã‚ˆãç¸®ã‚€ã¯ãš

**å‡ºå…¸**: [JPEG XL White Paper](https://ds.jpeg.org/whitepapers/jpeg-xl-whitepaper.pdf)

**å®Ÿè£…æ–¹é‡**:
- ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€: ãƒ–ãƒ­ãƒƒã‚¯ã”ã¨ã« activity è¨ˆç®—â†’q_delta æ±ºå®šï¼ˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã®ã¿å¤‰æ›´ï¼‰
- ãƒ‡ã‚³ãƒ¼ãƒ€: q_delta èª­ã¿å–ã‚Šâ†’dequant ãƒ†ãƒ¼ãƒ–ãƒ«èª¿æ•´ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å»¶é•·ï¼‰
- é‡å­åŒ–ãƒ†ãƒ¼ãƒ–ãƒ«: ãƒ–ãƒ­ãƒƒã‚¯å˜ä½ or ã‚¿ã‚¤ãƒ«å˜ä½ã§å¯å¤‰

---

### Eæ¡ˆ: 4:2:0 ã‚µãƒ–ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°

**æ¦‚è¦**: ã‚¯ãƒ­ãƒã®è§£åƒåº¦ã‚’åŠåˆ†ã«ã™ã‚‹ï¼ˆJPEG ã¨åŒã˜ï¼‰

**ChatGPT Pro è©•ä¾¡**:
- âœ… å†™çœŸã§ã¯å¼·ã„
- âš ï¸ ã€Œ-33%ã€ã¯ 4:2:2 ç›¸å½“ã®ç›´æ„Ÿã€‚4:2:0 ã¯ç”Ÿã‚µãƒ³ãƒ—ãƒ«æ•°ã§ã¯ã‚‚ã£ã¨æ¸›ã‚‹ãŒã€åœ§ç¸®å¾Œã¯å˜ç´”æ¯”ä¾‹ã—ãªã„
- âš ï¸ ãƒ‡ã‚³ãƒ¼ãƒ‰å´ã«ã‚¢ãƒƒãƒ—ã‚µãƒ³ãƒ—ãƒ«ãŒç¢ºå®Ÿã«å¢—ãˆã‚‹
- ğŸ’¡ **ã€Œå†™çœŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é™å®šã€ãŒå®‰å…¨**ï¼ˆçˆ†é€Ÿãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å®ˆã‚‹ï¼‰

**å®Ÿè£…æ–¹é‡**:
- ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€: Cb/Cr ã‚’ 2Ã—2 å¹³å‡ã§ãƒ€ã‚¦ãƒ³ã‚µãƒ³ãƒ—ãƒ«
- ãƒ‡ã‚³ãƒ¼ãƒ€: ãƒã‚¤ãƒªãƒ‹ã‚¢ or è¿‘å‚ã‚¢ãƒƒãƒ—ã‚µãƒ³ãƒ—ãƒ«
- FileHeader: subsampling ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ (0=4:4:4, 1=4:2:0)

---

### Fæ¡ˆ: Band-group CDF

**æ¦‚è¦**: AC ä¿‚æ•°ã‚’å‘¨æ³¢æ•°å¸¯åŸŸã§åˆ†ã‘ã¦ã€åˆ¥ã€…ã® CDF ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
```
Low-band (zigzag 0-15), Mid-band (16-31), High-band (32-62)
â†’ å„ãƒãƒ³ãƒ‰ã®åˆ†å¸ƒãŒç•°ãªã‚‹ãŸã‚ã€CDF ãŒå°–ã£ã¦ rANS åŠ¹ç‡ãŒä¸ŠãŒã‚‹
```

**ChatGPT Pro è©•ä¾¡**:
- âœ… NyANS-P ã¨æœ€ã‚‚ç›¸æ€§ãŒã„ã„ã€Œã»ã¼ç„¡æ–™ã®ç¢ºç‡æ”¹å–„ã€
- âœ… JPEG XL ã‚‚æ–‡è„ˆå·¥å¤«ã§ç¸®ã‚ã‚‹è¨­è¨ˆã‚’å¼·ãæ‰“ã¡å‡ºã—ã¦ã„ã‚‹
- âš ï¸ **é‡è¦**: P-Index ã§é€”ä¸­å¾©å·ã™ã‚‹ãªã‚‰ **CDF ãŒãƒãƒ£ãƒ³ã‚¯å†…ã§é–‰ã˜ã¦ã„ã‚‹** å¿…è¦ãŒã‚ã‚‹
  - å¯¾ç­–1: ãƒãƒ£ãƒ³ã‚¯ã”ã¨ã« CDF å›ºå®š
  - å¯¾ç­–2: P-Index ã« CDF çŠ¶æ…‹ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å«ã‚ã‚‹
  - **å¯¾ç­–2 ã¯ HakoNyans ã®å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆã«ãªã‚Šå¾—ã‚‹**

**å‡ºå…¸**: [JPEG XL White Paper](https://ds.jpeg.org/whitepapers/jpeg-xl-whitepaper.pdf)

---

### Gæ¡ˆ: AAN IDCT é«˜é€ŸåŒ–

**æ¦‚è¦**: ç¾åœ¨ã® float DCT/IDCT ã‚’æ•´æ•° AAN (Arai-Agui-Nakajima) ã«ç½®ãæ›ãˆ

**ChatGPT Pro è©•ä¾¡**:
- âœ… AAN ã¯ "æœ€é€Ÿã‚¯ãƒ©ã‚¹ã® 1D DCT/IDCT ç³»" ã¨ã—ã¦å¤å…¸çš„ã«å‚ç…§ã•ã‚Œã‚‹
- ğŸ’¡ **ã™ã§ã« AVX2 ãŒã‚ã‚‹å ´åˆã€AAN ãã®ã‚‚ã®ã‚ˆã‚Šä»¥ä¸‹ã®æ–¹ãŒåŠ¹ãå¯èƒ½æ€§**:
  - ãƒ¡ãƒ¢ãƒªé…ç½®ï¼ˆã‚¿ã‚¤ãƒ«â†’ãƒ–ãƒ­ãƒƒã‚¯é †ï¼‰ã®æœ€é©åŒ–
  - dequant ã¨ IDCT ã®ã‚¹ã‚±ãƒ¼ãƒ«çµ±åˆ
  - è»¢ç½®ã®å‰Šæ¸›

**å‡ºå…¸**: [Streaming SIMD Extensions â€” Fast 8x8 IDCT (Intel AP-922)](https://www.cs.cmu.edu/~barbic/cs-740/ap922.pdf)

**å®Ÿè£…æ–¹é‡**:
- transform_dct.h ã®å·®ã—æ›¿ãˆ
- AAN ã‚¹ã‚±ãƒ¼ãƒ«ä¿‚æ•°ã¨ quant ãƒ†ãƒ¼ãƒ–ãƒ«ã®äº‹å‰çµ±åˆ
- ä¹—ç®—5å›ã€åŠ ç®—29å›ã§ 1D-IDCT

---

### Hæ¡ˆï¼ˆæ–°è¦ãƒ»å¼·ãæ¨å¥¨ï¼‰: Palette / Delta Palette ãƒ¢ãƒ¼ãƒ‰ ğŸ®

**æ¦‚è¦**: ã‚¹ã‚¯ã‚·ãƒ§ãƒ»UIãƒ»ã‚²ãƒ¼ãƒ ç”»é¢å‘ã‘ã€‚ãƒ–ãƒ­ãƒƒã‚¯å†…ã®è‰²æ•°ãŒå°‘ãªã„å ´åˆã«ãƒ‘ãƒ¬ãƒƒãƒˆåŒ–

**ChatGPT Pro è©•ä¾¡**:
- âœ… AV1 ã« Palette mode ã‚ã‚Šï¼ˆãƒ–ãƒ­ãƒƒã‚¯ã”ã¨ã«ãƒ‘ãƒ¬ãƒƒãƒˆ+ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒãƒƒãƒ—ï¼‰
- âœ… JPEG XL ã‚‚ "generalised delta palette transform" ã‚’æŒã¤
- âœ… **HakoNyans ã¨ã®ç›¸æ€§ãŒç‰¹ã«è‰¯ã„ç†ç”±**:
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯å°ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆ â†’ NyANS-P ã® LUT è·¯ç·šã¨å™›ã¿åˆã†
  - 4:2:0 ã®è‰²ã«ã˜ã¿å•é¡ŒãŒãªã„ï¼ˆè‰²ã‚’ä¿ã£ãŸã¾ã¾ç¸®ã‚€ï¼‰
  - UI/ã‚²ãƒ¼ãƒ ã§å·®åˆ¥åŒ–ã—ã‚„ã™ã„

**å‡ºå…¸**: [JPEG XL White Paper](https://ds.jpeg.org/whitepapers/jpeg-xl-whitepaper.pdf)

**å®Ÿè£…æ–¹é‡**:
- ãƒ–ãƒ­ãƒƒã‚¯åˆ¤å®š: è‰²æ•° â‰¤ é–¾å€¤ï¼ˆ8è‰²ç¨‹åº¦ï¼‰ãªã‚‰ Palette ãƒ¢ãƒ¼ãƒ‰é¸æŠ
- ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€: ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆè‰²ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰+ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒãƒƒãƒ—ã‚’ç”Ÿæˆ
- ãƒ‡ã‚³ãƒ¼ãƒ€: ãƒ‘ãƒ¬ãƒƒãƒˆã‚’èª­ã¿å–ã‚Šã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰è‰²ã‚’å¾©å…ƒ
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ NyANS-P ã§ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ç¬¦å·åŒ–
- FileHeader/ãƒ–ãƒ­ãƒƒã‚¯ãƒ˜ãƒƒãƒ€ã§ Palette/DCT ã‚’åŒºåˆ¥ã™ã‚‹ãƒ•ãƒ©ã‚°

---

### Iæ¡ˆï¼ˆæ–°è¦ï¼‰: 2Dã‚³ãƒ”ãƒ¼ï¼ˆPatch / IntraBC è»½é‡ç‰ˆï¼‰

**æ¦‚è¦**: ç”»åƒå†…ã®ç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚ç…§ã‚³ãƒ”ãƒ¼ã§è¡¨ç¾

**ChatGPT Pro è©•ä¾¡**:
- âœ… JPEG XL ã® patchesã€AV1 ã® IntraBC ã¨åŒç³»çµ±
- âœ… UI/ãƒ†ã‚¯ã‚¹ãƒãƒ£/ãƒ­ã‚´/ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¼·ã„
- ğŸ’¡ HakoNyans ã§ã¯é‡ã„å®Ÿè£…ä¸è¦ã€è»½é‡ç‰ˆã§ååˆ†:
  - `COPY_RECT`ï¼ˆå‚ç…§ä½ç½®ï¼‹ã‚µã‚¤ã‚ºï¼‰
  - LZ77 é¢¨ã®ç¹°ã‚Šè¿”ã—ï¼ˆã‚¿ã‚¤ãƒ«å†…é™å®šï¼‰

**å‡ºå…¸**: [JPEG XL White Paper](https://ds.jpeg.org/whitepapers/jpeg-xl-whitepaper.pdf)

---

### Jæ¡ˆï¼ˆæ–°è¦ãƒ»å·®åˆ¥åŒ–ã®æ ¸ï¼‰: P-Index ROI / éƒ¨åˆ†ãƒ‡ã‚³ãƒ¼ãƒ‰ ğŸŒŸ

**æ¦‚è¦**: P-Index ã‚’æ‹¡å¼µã—ã¦ã€ç”»åƒã®ä¸€éƒ¨ã ã‘ã‚’é«˜é€Ÿãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹æ©Ÿèƒ½

**ChatGPT Pro è©•ä¾¡**:
- âœ… JPEG XL ã‚‚ã‚°ãƒ«ãƒ¼ãƒ—åˆ†å‰²ã§ ROI ãƒ‡ã‚³ãƒ¼ãƒ‰ã‚’æ„è­˜ã—ã¦ã„ã‚‹
- âœ… **HakoNyans ã®ç‹¬å£‡å ´**: ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼å±¤è‡ªä½“ãŒãƒ‡ã‚³ãƒ¼ãƒ€é©å¿œã®ä¸¦åˆ—ã‚¹ã‚±ãƒ¼ãƒ«
- âœ… P-Indexï¼ˆRecoilæ–¹å¼ï¼‰ã§ä»»æ„ä½ç½®ã‹ã‚‰å¾©å·å¯èƒ½

**å‡ºå…¸**: [Recoil: Parallel rANS Decoding with Decoder-Adaptive Scalability](https://arxiv.org/abs/2306.12141)

**å·®åˆ¥åŒ–ã®å‡ºã—æ–¹**:
- ã€Œ1æšã®ç”»åƒãŒã€CPU ã‚³ã‚¢æ•°ã«åˆã‚ã›ã¦ãƒ‡ã‚³ãƒ¼ãƒ‰ãŒé€Ÿããªã‚‹ã€
- ã€Œç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ãŒå¿…è¦ãªé ˜åŸŸã ã‘å¾©å·ã§ãã‚‹ï¼ˆã‚µãƒ ãƒâ†’æ‹¡å¤§ã§ä¸€ç¬ï¼‰ã€
- ã€Œãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–è¡¨ç¤º: DCâ†’Low ACâ†’High AC ã®æ®µéšè¡¨ç¤ºã€

**å®Ÿè£…æ–¹é‡**:
- ã‚¿ã‚¤ãƒ«å˜ä½ã®ç‹¬ç«‹ãƒ‡ã‚³ãƒ¼ãƒ‰ï¼ˆæ—¢å­˜ã®ä»•çµ„ã¿ã‚’æ‹¡å¼µï¼‰
- ã‚¿ã‚¤ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ç©ºé–“åº§æ¨™ã‚’å«ã‚ã‚‹
- ãƒ“ãƒ¥ãƒ¼ã‚¢ API: `decode_region(x, y, w, h)` ã‚’å…¬é–‹

---

### Bæ¡ˆ: Super-res + è»½é‡ Restoreï¼ˆPhase 8ï¼‰

**ChatGPT Pro è©•ä¾¡**:
- âœ… ä½ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆã§ "ãã‚Œã£ã½ãè¦‹ãˆã‚‹" ä½“é¨“ãŒä½œã‚Œã‚‹
- âœ… AV1: ãƒ€ã‚¦ãƒ³ã‚¹ã‚±ãƒ¼ãƒ«ã¯énormativeã€ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«ã¯normativeã€å¾©å…ƒãƒ•ã‚£ãƒ«ã‚¿ã¨ã‚»ãƒƒãƒˆ
- âš ï¸ ãƒ‡ã‚³ãƒ¼ãƒ€ã«å‡¦ç†è¿½åŠ  â†’ **ä½ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆç”¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦åˆ†é›¢** ãŒå‰

**å‡ºå…¸**: [AV1 Tool Description](https://aomedia.org/docs/AV1_ToolDescription_v11-clean.pdf)

---

### Cæ¡ˆ: Film Grain Synthesisï¼ˆPhase 8ï¼‰

**ChatGPT Pro è©•ä¾¡**:
- âœ… å†™çœŸã® "ã®ã£ãºã‚Š" ã‚’ä½ã‚³ã‚¹ãƒˆã§èª¤é­”åŒ–ã›ã‚‹
- âœ… AOMedia ã®æŠ€è¡“å ±å‘Š: ã€Œãƒ‡ãƒã‚¤ã‚ºâ†’åœ§ç¸®â†’ã‚°ãƒ¬ã‚¤ãƒ³ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é€ä»˜â†’ãƒ‡ã‚³ãƒ¼ãƒ€ã§åˆæˆã€
- âš ï¸ **å†™çœŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é™å®š**ï¼ˆç·šç”»/æ–‡å­—ã§ã¯é€†åŠ¹æœï¼‰

**å‡ºå…¸**: [AOMedia Film Grain Synthesis Technology](https://aomedia.org/docs/CWG-C051o_TR_AOMedia_film_grain_synthesis_technology_v2.pdf)

---

## ğŸ—ï¸ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ChatGPT Pro æ¨å¥¨: **ç”¨é€”åˆ¥ã«3ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†ã‘ã‚‹**

### Profile 0: Fastï¼ˆä¸»åŠ›ãƒ»çˆ†é€Ÿ â€” Phase 7a/7bï¼‰

**ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: ã‚ã‚‰ã‚†ã‚‹ç”»åƒã®é«˜é€Ÿãƒ‡ã‚³ãƒ¼ãƒ‰
```
Dï¼ˆé©å¿œé‡å­åŒ–ï¼‰ + Aï¼ˆCfLï¼‰ + Fï¼ˆBand-group CDFï¼‰ + Gï¼ˆAAN IDCTï¼‰
4:4:4 åŸºæœ¬ï¼ˆã«ã˜ã¿äº‹æ•…ã‚’é¿ã‘ã‚‹ï¼‰
```

### Profile 1: Photoï¼ˆå†™çœŸé…å¸ƒãƒ»åœ§ç¸®é‡è¦– â€” Phase 7a + 8ï¼‰

**ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: SNS/ã‚¢ãƒ«ãƒãƒ ã€Web é…ä¿¡
```
Profile 0 ã«åŠ ãˆã¦:
+ Eï¼ˆ4:2:0ï¼‰
+ Bï¼ˆSuper-res + Restoreã€ä½ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆæ™‚ï¼‰
+ Cï¼ˆFilm Grainã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

### Profile 2: Screenï¼ˆã‚¹ã‚¯ã‚·ãƒ§/UI/ã‚²ãƒ¼ãƒ  â€” Phase 7cï¼‰

**ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚­ãƒ£ãƒ—ãƒãƒ£ã€ã‚²ãƒ¼ãƒ ã€æ¼«ç”»ã€UI
```
Profile 0 ã«åŠ ãˆã¦:
+ Hï¼ˆPalette / Delta Paletteï¼‰
+ Iï¼ˆ2Dã‚³ãƒ”ãƒ¼ï¼‰
4:4:4 å›ºå®šï¼ˆè‰²ã«ã˜ã¿å³ç¦ï¼‰
```

### å…¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å…±é€š

```
+ Jï¼ˆP-Index ROI / éƒ¨åˆ†ãƒ‡ã‚³ãƒ¼ãƒ‰ï¼‰
+ ãƒ­ã‚¹ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆYCoCg-R + Paeth + rANSï¼‰
```

---

## ğŸ—ï¸ ãƒ­ã‚¹ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰è¨­è¨ˆ

### å¿…è¦ãªå¤‰æ›´

1. **å¯é€†è‰²å¤‰æ›**: YCoCg-Rï¼ˆãƒªãƒ•ãƒ†ã‚£ãƒ³ã‚°ãƒ™ãƒ¼ã‚¹ã€å®Œå…¨å¯é€†ï¼‰
   ```
   Co = R - B
   tmp = B + (Co >> 1)
   Cg = G - tmp
   Y = tmp + (Cg >> 1)
   ```

2. **é‡å­åŒ–ãªã—**: Q=lossless ãƒ•ãƒ©ã‚° â†’ dequant ã‚’ã‚¹ã‚­ãƒƒãƒ—

3. **äºˆæ¸¬**: Paeth predictorï¼ˆPNGä»•æ§˜ã§å®šç¾©ã€å·¦/ä¸Š/å·¦ä¸Šã®æœ€è¿‘å‚é¸æŠï¼‰

4. **DCT ãƒã‚¤ãƒ‘ã‚¹**: äºˆæ¸¬æ®‹å·®ã‚’ç›´æ¥ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰

**å‡ºå…¸**: [PNG Specification](https://w3c.github.io/png/)

### âš ï¸ P-Index ã¨ã®äº’æ›æ€§

**ChatGPT Pro æŒ‡æ‘˜**: Paeth ã¯å·¦/ä¸Šå‚ç…§ã®é€æ¬¡ä¾å­˜ãŒå¼·ãã€P-Index ã®é€”ä¸­å¾©å·ã¨ç›¸æ€§ãŒæ‚ªã„ã€‚

**å¯¾ç­–**:
- ã‚¿ã‚¤ãƒ«ã”ã¨ã«äºˆæ¸¬ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆå¢ƒç•Œãƒ¡ã‚¿ã‚’æŒã¤ï¼‰
- ã‚‚ã—ãã¯ã€Œè¡Œå˜ä½ã€ã€Œãƒ–ãƒ­ãƒƒã‚¯å˜ä½ã€ã§ç‹¬ç«‹æ€§ã‚’ä½œã‚‹
- P-Index ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã«äºˆæ¸¬ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚‚å«ã‚ã‚‹

---

## ğŸ“‹ å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 7a: åœ§ç¸®ç‡æ”¹å–„ï¼ˆ6x â†’ 2ã€œ3xï¼‰

| é †ç•ª | æ–½ç­– | æœŸå¾…åŠ¹æœ | ç´¯ç©ã‚µã‚¤ã‚º |
|------|------|---------|----------|
| â‘  | **D: é©å¿œé‡å­åŒ–** | -10ã€œ15% | ~870 KB (5.2x) |
| â‘¡ | **E: 4:2:0** | -33% | ~580 KB (3.5x) |
| â‘¢ | **A: CfL** | -5ã€œ10% (ã‚¯ãƒ­ãƒ) | ~530 KB (3.2x) |
| â‘£ | **F: Band-group CDF** | -5ã€œ10% | ~490 KB (2.9x) |

### Phase 7b: ãƒ‡ã‚³ãƒ¼ãƒ‰é€Ÿåº¦æ”¹å–„ï¼ˆ27ms â†’ 15msï¼‰

| é †ç•ª | æ–½ç­– | æœŸå¾…åŠ¹æœ | ç´¯ç©é€Ÿåº¦ |
|------|------|---------|---------|
| â‘  | **G: AAN IDCT** | +20-30% | ~20 ms |
| â‘¡ | SIMD è‰²å¤‰æ› | +10% | ~18 ms |
| â‘¢ | ãƒ¡ãƒ¢ãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæœ€é©åŒ– | +10% | ~15 ms |

### Phase 7c: Screen/UI ç‰¹åŒ–

| é †ç•ª | æ–½ç­– | å¯¾è±¡ |
|------|------|------|
| â‘  | **H: Palette / Delta Palette** | ã‚¹ã‚¯ã‚·ãƒ§ã€UIã€ã‚²ãƒ¼ãƒ  |
| â‘¡ | **I: 2Dã‚³ãƒ”ãƒ¼** | ç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³ |

### Phase 7d: ä½“é¨“å‘ä¸Š

| æ–½ç­– | å†…å®¹ |
|------|------|
| **J: P-Index ROI** | éƒ¨åˆ†ãƒ‡ã‚³ãƒ¼ãƒ‰ã€ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–è¡¨ç¤º |

### Phase 8: é«˜åº¦æ©Ÿèƒ½

| æ–½ç­– | å†…å®¹ |
|------|------|
| ãƒ­ã‚¹ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ | YCoCg-R + Paeth + rANS |
| B: Super-res + Restore | ä½ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« |
| C: Film Grain | å†™çœŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« ã‚ªãƒ—ã‚·ãƒ§ãƒ³ |
| è»½é‡ãƒ‡ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚° | normative 1æ®µ EPF |

---

## ğŸ”‘ è¨­è¨ˆåŸå‰‡ï¼ˆå…¨ Phase å…±é€šï¼‰

### 1. ãƒ‡ã‚³ãƒ¼ãƒ€ã‚’è»½ãä¿ã¤
```
ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã§é ‘å¼µã‚‹ â†’ ãƒ‡ã‚³ãƒ¼ãƒ€ã¯å›ºå®šå‡¦ç†ã ã‘
RDOã€é©å¿œé‡å­åŒ–ã€CfL ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é¸æŠ â†’ å…¨ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€å´
ãƒ‡ã‚³ãƒ¼ãƒ€ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª­ã‚“ã§é©ç”¨ã™ã‚‹ã ã‘
```

### 2. ä¸¦åˆ—åŒ–ã‚’å£Šã•ãªã„
```
ãƒ–ãƒ­ãƒƒã‚¯é–“ä¾å­˜ã‚’ä½œã‚‰ãªã„ï¼ˆDC DPCM ã¯ãƒãƒ£ãƒ³ã‚¯å†…ã®ã¿ï¼‰
CfL: åŒä¸€ãƒ–ãƒ­ãƒƒã‚¯å†…ã§å®Œçµï¼ˆéš£æ¥ãƒ–ãƒ­ãƒƒã‚¯ä¸è¦ï¼‰
é©å¿œé‡å­åŒ–: ãƒ–ãƒ­ãƒƒã‚¯ç‹¬ç«‹ï¼ˆq_delta ã‚’èª­ã‚€ã ã‘ï¼‰
Band-group CDF: ãƒãƒ£ãƒ³ã‚¯å†…ã§ CDF å›ºå®šã€ã¾ãŸã¯ P-Index ã« CDF ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå«ã‚€
```

### 3. æ‹¡å¼µå¯èƒ½ã«ä¿ã¤
```
FileHeader.flags / profile ã§æ©Ÿèƒ½ã‚’ ON/OFF
æœªçŸ¥ã®ãƒãƒ£ãƒ³ã‚¯ã¯ skip
ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆfast / photo / screen / losslessï¼‰ã§åˆ†å²
```

### 4. æ—¢å­˜ãƒ†ã‚¹ãƒˆã‚’å£Šã•ãªã„
```
Phase 5-6 ã®ãƒ†ã‚¹ãƒˆã¯å…¨ã¦ PASS ã‚’ç¶­æŒ
æ–°æ©Ÿèƒ½ã¯æ–°ãƒ†ã‚¹ãƒˆã§æ¤œè¨¼
flags=0 / profile=0 ãªã‚‰ Phase 6 ã¨åŒã˜å‹•ä½œ
```

---

## ğŸ“Š Phase 7 å®Œäº†å¾Œã®äºˆæƒ³å€¤

| Codec | ã‚µã‚¤ã‚º | PSNR | ãƒ‡ã‚³ãƒ¼ãƒ‰ | å¼·ã¿ |
|-------|--------|------|---------|------|
| **HakoNyans Fast** | **~490 KB** | **~38 dB** | **~15 ms** | **é€Ÿåº¦Ã—ä¸¦åˆ—** |
| **HakoNyans Screen** | **~200 KB**â€» | **lossless** | **~12 ms** | **ã‚¹ã‚¯ã‚·ãƒ§æœ€å¼·** |
| JPEG | ~168 KB | ~34.6 dB | ~8 ms | äº’æ›æ€§ |
| JPEG-XL | ~96 KB | ~36.9 dB | ~34 ms | åœ§ç¸®ç‡ |
| AVIF | ~80 KB | ~37.5 dB | ~150 ms | é«˜ç”»è³ª |

â€» Screen ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç”»åƒå†…å®¹æ¬¡ç¬¬ã§å¤§ããå¤‰å‹•

### HakoNyans ã®ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°

```
åœ§ç¸®ç‡:  AVIF > JXL > JPEG â‰ˆ HakoNyans Photo >> HakoNyans Fast
é€Ÿåº¦:    HakoNyans Fast > JPEG >> HakoNyans Photo > JXL >> AVIF
ã‚¹ã‚¯ã‚·ãƒ§: HakoNyans Screen > JXL > PNG >> JPEG (è‹¦æ‰‹)
```

**çµè«–**: ã€Œ**é€Ÿãã¦ã€ã‚¹ã‚¯ã‚·ãƒ§ã«ã‚‚å†™çœŸã«ã‚‚ä½¿ãˆã‚‹**ã€ãŒ HakoNyans ã®å‹ã¡ç­‹

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

- [CfL: Predicting Chroma from Luma in AV1](https://arxiv.org/abs/1711.03951)
- [AV1 Tool Description](https://aomedia.org/docs/AV1_ToolDescription_v11-clean.pdf)
- [JPEG XL White Paper 2.0](https://ds.jpeg.org/whitepapers/jpeg-xl-whitepaper.pdf)
- [AOMedia Film Grain Synthesis](https://aomedia.org/docs/CWG-C051o_TR_AOMedia_film_grain_synthesis_technology_v2.pdf)
- [Recoil: Parallel rANS Decoding](https://arxiv.org/abs/2306.12141)
- [AAN Fast 8x8 IDCT (Intel AP-922)](https://www.cs.cmu.edu/~barbic/cs-740/ap922.pdf)
- [PNG Specification (Paeth predictor)](https://w3c.github.io/png/)
